pipeline:
  build:
    image: debian:latest
    pull: true
    commands:
      - apt update
      - apt install pip git -y
      - python3 -m pip install --no-cache-dir -r requirements.txt
      - mkdocs build --clean --verbose -d dev

  push:
    image: appleboy/drone-git-push
    settings:
      remote_name: origin
      branch: pages
      author_name: fariszr
      local_ref: pages
      ssh_key: 
        from_secret: key_ssh
      path: dev

when:
  branch: V3-Dev
  event: push
